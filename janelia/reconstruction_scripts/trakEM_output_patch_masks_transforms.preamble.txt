importPackage( Packages.ini.trakem2.display );
importPackage( Packages.mpicbg.trakem2 );
importClass( Packages.java.util.HashMap );
importClass( Packages.java.awt.geom.AffineTransform );
importClass( Packages.ij.io.Opener );

var opener = new Opener();
var tiles = new HashMap();
var front = Display.getFront();
if ( front )
{
	var layerIterator = front.getLayer().getParent().getLayers().iterator();
	while ( layerIterator.hasNext() )
	{
		var tileIterator = layerIterator.next().getDisplayables( Patch ).iterator();
		while ( tileIterator.hasNext() )
		{
			var tile = tileIterator.next();
			tiles.put( tile.getFilePath(), tile );
			IJ.log( tile.getFilePath() + " : " + tile.getTitle() );
		}
	}

	var impMask;
	var tile;
	var tileCopy;
	
